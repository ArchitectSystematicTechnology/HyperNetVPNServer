groups:
- name: roles/float-infra-prometheus/templates/rules/alerts_ssl_probes.conf
  rules:
  - alert: SSLCertificateAboutToExpire
    expr: target:probe_ssl_cert_expiry:days < 10
    for: 3h
    labels:
      scope: global
      severity: page 
    annotations:
      summary: 'SSL certificate about to expire for {{ $labels.probe }}@{{ $labels.host }}'
      description: 'The "{{ $labels.probe }}" prober reports that {{ $labels.host }} is serving a SSL certificate that will expire in {{ $value }} days.'
      runbook: '[[ alert_runbook_fmt | format("SSLCertificateAboutToExpire") ]]'

