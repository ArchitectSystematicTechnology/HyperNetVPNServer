- hosts: log-collector
  gather_facts: no
  tasks:
    - name: Enumerate syslog files
      find:
        paths: /var/log/remote/
        patterns: "*.log"
        depth: 2
        recurse: yes
      register: remote_logs
      no_log: true

    - name: Fetch syslog files
      fetch:
        src: "{{ item.path }}"
        dest: "{{ out_dir }}"
      with_items: "{{ remote_logs.files }}"
      no_log: true
